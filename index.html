<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>ATA 2025 Thyroid Cancer Management</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- React -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <!-- UI -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.min.js"></script>
</head>

<body class="bg-slate-50">
  <div id="root"></div>

  <script type="text/babel">
    const { useState } = React;
    const { Activity, FileText, Calendar, Microscope, TestTube, Syringe, AlertCircle, Check, ChevronRight } = lucide;

    function App() {
      const [step, setStep] = useState(1);
      const [loading, setLoading] = useState(false);
      const [aiRecommendation, setAiRecommendation] = useState(null);

      const [formData, setFormData] = useState({
        patientAge: "",
        yearOfOperation: "",
        surgeryType: "",
        histology: "",
        tnm: { t: "", n: "", m: "" },
        labs: { tg: "", tgAbs: "", tsh: "" },
        ultrasound: "",
        receivedRAI: ""
      });

      const update = (k, v) => setFormData(p => ({ ...p, [k]: v }));

      const mockAI = () => {
        setLoading(true);
        setTimeout(() => {
          setAiRecommendation(`ğŸ¯ ATA 2025 Risk Stratification
Low-Intermediate Risk

ğŸ“Š Response to Therapy
Excellent

ğŸšï¸ TSH Target
Below normal range

âœ… Immediate Management (Next 1â€“6 months)
1. ğŸ“Œ Maintain levothyroxine with TSH suppression
2. ğŸ§ª Repeat Tg/TgAb in 6 months
3. ğŸ©» Neck ultrasound at 6â€“12 months
4. ğŸ§  Patient education and adherence reinforcement
5. ğŸ“… Endocrinology follow-up

ğŸ”„ Long-Term Strategy
Annual biochemical surveillance with gradual de-escalation after sustained excellent response.`);
          setLoading(false);
        }, 1200);
      };

      if (aiRecommendation) {
        return (
          <div className="max-w-4xl mx-auto p-6">
            <div className="bg-white rounded-xl shadow p-6">
              <h1 className="text-2xl font-bold mb-4">Clinical Recommendation</h1>
              <pre className="whitespace-pre-wrap text-slate-700">{aiRecommendation}</pre>

              <div className="mt-6 flex gap-3">
                <button
                  onClick={() => window.print()}
                  className="flex-1 bg-emerald-600 text-white py-3 rounded-lg"
                >
                  Print
                </button>
                <button
                  onClick={() => {
                    setAiRecommendation(null);
                    setStep(1);
                  }}
                  className="flex-1 bg-slate-600 text-white py-3 rounded-lg"
                >
                  New Patient
                </button>
              </div>

              <p className="mt-4 text-xs text-slate-500">
                This tool provides guideline-based decision support and does not replace clinical judgment.
              </p>
            </div>
          </div>
        );
      }

      return (
        <div className="max-w-4xl mx-auto p-6">
          <div className="text-center mb-8">
            <h1 className="text-4xl font-bold">ATA 2025 Thyroid Cancer</h1>
            <p className="text-slate-600">Clinical Management Assistant</p>
          </div>

          <div className="bg-white rounded-xl shadow p-6 space-y-4">
            {step === 1 && (
              <>
                <label className="block">
                  Age
                  <input
                    type="number"
                    className="w-full mt-1 border rounded p-2"
                    value={formData.patientAge}
                    onChange={e => update("patientAge", e.target.value)}
                  />
                </label>

                <label className="block">
                  Management Type
                  <select
                    className="w-full mt-1 border rounded p-2"
                    value={formData.surgeryType}
                    onChange={e => update("surgeryType", e.target.value)}
                  >
                    <option value="">Select</option>
                    <option>Total Thyroidectomy</option>
                    <option>Lobectomy</option>
                    <option>Active Surveillance</option>
                  </select>
                </label>
              </>
            )}

            {step === 2 && (
              <>
                <label className="block">
                  Histology
                  <select
                    className="w-full mt-1 border rounded p-2"
                    value={formData.histology}
                    onChange={e => update("histology", e.target.value)}
                  >
                    <option value="">Select</option>
                    <option>Papillary</option>
                    <option>Follicular</option>
                    <option>Medullary</option>
                  </select>
                </label>
              </>
            )}

            <div className="flex gap-3 pt-4">
              {step > 1 && (
                <button
                  onClick={() => setStep(step - 1)}
                  className="flex-1 bg-slate-200 py-3 rounded"
                >
                  Back
                </button>
              )}

              {step < 2 ? (
                <button
                  onClick={() => setStep(step + 1)}
                  className="flex-1 bg-blue-600 text-white py-3 rounded"
                  disabled={!formData.patientAge || !formData.surgeryType}
                >
                  Continue
                </button>
              ) : (
                <button
                  onClick={mockAI}
                  className="flex-1 bg-emerald-600 text-white py-3 rounded"
                  disabled={loading}
                >
                  {loading ? "Generating..." : "Generate Recommendation"}
                </button>
              )}
            </div>
          </div>

          <p className="mt-6 text-center text-xs text-slate-500">
            Based on the 2025 American Thyroid Association Guidelines
          </p>
        </div>
      );
    }

    const root = ReactDOM.createRoot(document.getElementById("root"));
    root.render(<App />);
  </script>
</body>
</html>
